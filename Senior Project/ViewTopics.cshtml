@model TopicDomainViewModel
@{
    ViewBag.Title = "Survey Questions";
    Layout = "_SuperAdminLayout";
}
<head>
    <style>
        .quesPrompt {
            width: 80%;
        }

        .quesAction {
            width: 20%;
        }
        h2 {
            font-weight: 800;
            text-align: center;
            font-size:35px;
            margin-bottom: 20px;
        }
        @@media screen and (max-width: 500px) {

            h2 {
                font-size: 200%;
            }

            svg {
                height: 10px;
                width: 10px;
            }
        }
        @@media screen and (max-width: 395px) {
            .text-left{
                font-size:10px;
            }
            p{
                font-size:10px;
            }
            h2 {
                font-size: 20px;
            }

            svg {
                height: 8px;
                width: 8px;
            }
        }
    </style>
</head>

<h2 style="text-align:center">Domain @Model.Domain.DomainOrder: @Model.Domain.DomainName</h2>
<!--Sort Topics-->
<div style="display:inline-block" class="SortTable">
    <p style="font-variant-caps: all-small-caps; font-weight: bold; margin-right: 6px; display:inline-block">Sort Topics By: </p>
    <div style="display:inline-block;">
        @if (ViewBag.topicSortOrder == "name_asc")
        {
            <div style="margin-right:6px" class="text-left">Title <a asp-action="ViewTopics" asp-route-questionSortOrder="@ViewBag.questionSortOrder" asp-route-topicSortOrder="@ViewData["TNameSortParm"]"><svg class="bi" height="15" width="15" stroke="black"><rect width="100%" height="100%" fill="rgb(181, 211, 54)" /><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-down" /></svg></a></div>
        }
        else if (ViewBag.topicSortOrder == "name_dsc")
        {
            <div style="margin-right:6px" class="text-left">Title <a asp-action="ViewTopics" asp-route-questionSortOrder="@ViewBag.questionSortOrder" asp-route-topicSortOrder="@ViewData["TNameSortParm"]"><svg class="bi" height="15" width="15" stroke="white"><rect width="100%" height="100%" fill="rgb(19, 146, 208)" /><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-up" /></svg></a></div>
        }
        else
        {
            <div style="margin-right:6px" class="text-left">Title <a asp-action="ViewTopics" asp-route-questionSortOrder="@ViewBag.questionSortOrder" asp-route-topicSortOrder="@ViewData["TNameSortParm"]"><svg class="bi" height="15" width="15" fill="blue"><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-down" /></svg></a></div>
        }
    </div>
    <div style="display:inline-block;">
        @if (ViewBag.topicSortOrder == "Active")
        {
            <div style="margin-right:6px" class="text-left">Active <a asp-action="ViewTopics" asp-route-questionSortOrder="@ViewBag.questionSortOrder" asp-route-topicSortOrder="@ViewData["TActive"]"><svg class="bi" height="15" width="15" stroke="black"><rect width="100%" height="100%" fill="rgb(181, 211, 54)" /><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-down" /></svg></a></div>
        }
        else if (ViewBag.topicSortOrder == "Inactive")
        {
            <div style="margin-right:6px" class="text-left">Active <a asp-action="ViewTopics" asp-route-questionSortOrder="@ViewBag.questionSortOrder" asp-route-topicSortOrder="@ViewData["TActive"]"><svg class="bi" height="15" width="15" stroke="white"><rect width="100%" height="100%" fill="rgb(19, 146, 208)" /><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-up" /></svg></a></div>
        }
        else
        {
            <div style="margin-right:6px" class="text-left">Active <a asp-action="ViewTopics" asp-route-questionSortOrder="@ViewBag.questionSortOrder" asp-route-topicSortOrder="@ViewData["TActive"]"><svg class="bi" height="15" width="15" fill="blue"><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-down" /></svg></a></div>
        }
    </div>
    <div style="display:inline-block;">
        @if (ViewBag.topicSortOrder == "OAsc")
        {
            <div style="margin-right:6px" class="text-left">Order <a asp-action="ViewTopics" asp-route-questionSortOrder="@ViewBag.questionSortOrder" asp-route-topicSortOrder="@ViewData["TOrder"]"><svg class="bi" height="15" width="15" stroke="black"><rect width="100%" height="100%" fill="rgb(181, 211, 54)" /><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-down" /></svg></a></div>
        }
        else if (ViewBag.topicSortOrder == "ODsc")
        {
            <div style="margin-right:6px" class="text-left">Order <a asp-action="ViewTopics" asp-route-questionSortOrder="@ViewBag.questionSortOrder" asp-route-topicSortOrder="@ViewData["TOrder"]"><svg class="bi" height="15" width="15" stroke="white"><rect width="100%" height="100%" fill="rgb(19, 146, 208)" /><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-up" /></svg></a></div>
        }
        else
        {
            <div style="margin-right:6px" class="text-left">Order <a asp-action="ViewTopics" asp-route-questionSortOrder="@ViewBag.questionSortOrder" asp-route-topicSortOrder="@ViewData["TOrder"]"><svg class="bi" height="15" width="15" fill="blue"><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-down" /></svg></a></div>
        }
    </div>
</div>
<br />
<!--Sort Questions-->
<div style="display:inline-block" class="SortTable">
    <p style="font-variant-caps: all-small-caps; font-weight: bold; margin-right: 6px; display:inline-block">Sort Questions By: </p>
    <div style="display:inline-block;">
        @if (ViewBag.questionSortOrder == "que_asc")
        {
            <div style="margin-right:6px" class="text-left">Prompt <a asp-action="ViewTopics" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionSortOrder="@ViewData["QNameSortParm"]"><svg class="bi" height="15" width="15" stroke="black"><rect width="100%" height="100%" fill="rgb(181, 211, 54)" /><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-down" /></svg></a></div>
        }
        else if (ViewBag.questionSortOrder == "que_dsc")
        {
            <div style="margin-right:6px" class="text-left">Prompt <a asp-action="ViewTopics" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionSortOrder="@ViewData["QNameSortParm"]"><svg class="bi" height="15" width="15" stroke="white"><rect width="100%" height="100%" fill="rgb(19, 146, 208)" /><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-up" /></svg></a></div>
        }
        else
        {
            <div style="margin-right:6px" class="text-left">Prompt <a asp-action="ViewTopics" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionSortOrder="@ViewData["QNameSortParm"]"><svg class="bi" height="15" width="15" fill="blue"><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-down" /></svg></a></div>
        }
    </div>
    <div style="display:inline-block;">
        @if (ViewBag.questionSortOrder == "Active")
        {
            <div style="margin-right:6px" class="text-left">Active <a asp-action="ViewTopics" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionSortOrder="@ViewData["QActive"]"><svg class="bi" height="15" width="15" stroke="black"><rect width="100%" height="100%" fill="rgb(181, 211, 54)" /><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-down" /></svg></a></div>
        }
        else if (ViewBag.questionSortOrder == "Inactive")
        {
            <div style="margin-right:6px" class="text-left">Active <a asp-action="ViewTopics" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionSortOrder="@ViewData["QActive"]"><svg class="bi" height="15" width="15" stroke="white"><rect width="100%" height="100%" fill="rgb(19, 146, 208)" /><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-up" /></svg></a></div>
        }
        else
        {
            <div style="margin-right:6px" class="text-left">Active <a asp-action="ViewTopics" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionSortOrder="@ViewData["QActive"]"><svg class="bi" height="15" width="15" fill="blue"><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-down" /></svg></a></div>
        }
    </div>
    <div style="display:inline-block;">
        @if (ViewBag.questionSortOrder == "OAsc")
        {
            <div style="margin-right:6px" class="text-left">Order <a asp-action="ViewTopics" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionSortOrder="@ViewData["QOrder"]"><svg class="bi" height="15" width="15" stroke="black"><rect width="100%" height="100%" fill="rgb(181, 211, 54)" /><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-down" /></svg></a></div>
        }
        else if (ViewBag.questionSortOrder == "ODsc")
        {
            <div style="margin-right:6px" class="text-left">Order <a asp-action="ViewTopics" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionSortOrder="@ViewData["QOrder"]"><svg class="bi" height="15" width="15" stroke="white"><rect width="100%" height="100%" fill="rgb(19, 146, 208)" /><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-up" /></svg></a></div>
        }
        else
        {
            <div style="margin-right:6px" class="text-left">Order <a asp-action="ViewTopics" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionSortOrder="@ViewData["QOrder"]"><svg class="bi" height="15" width="15" fill="blue"><use xlink:href="/lib/bootstrap-icons/bootstrap-icons.svg#chevron-down" /></svg></a></div>
        }
    </div>
</div>

@foreach (var topic in Model.Topics.Where(p => p.DomainId == Model.Domain.DomainId))
{
    <table class="table table-bordered">
        <tr>
            <th style="text-align:left">@topic.TopicOrder) @topic.TopicName</th>
            <th class="text-center">
                <form asp-action="DeleteTopic" method="post">
                    <a asp-action="EditTopic" class="btn btn-sm btn-warning"
                       asp-route-topicNo="@topic.TopicId">
                        Edit
                    </a>
                    <input type="hidden" name="TopicNo" value="@topic.TopicId" />
                    <input type="hidden" name="topicSortOrder" value="@ViewBag.topicSortOrder" />
                    <input type="hidden" name="questionSortOrder" value="@ViewBag.questionSortOrder" />
                    @if (topic.Active == 1)
                    {
                        <a asp-action="ShowHideTopic" onclick="return confirmation('Are you sure you want to hide this topic?')" class="btn btn-dark btn-sm DeleteEvents"
                           asp-route-topicNo="@topic.TopicId" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionOrder="@ViewBag.questionSortOrder">
                            Active
                        </a>
                    }
                    else
                    {
                        <a asp-action="ShowHideTopic" onclick="return confirmation('Are you sure you want to show this topic?')" class="btn btn-outline-dark btn-sm DeleteEvents"
                           asp-route-topicNo="@topic.TopicId" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionOrder="@ViewBag.questionSortOrder">
                            Inactive
                        </a>
                    }
                    <button type="submit" onclick="return confirmation('Are you sure you want to delete this topic?')" class="btn btn-danger btn-sm DeleteEvents">
                        Delete
                    </button>
                </form>
            </th>
        </tr>
        @foreach (var question in Model.Questions.Where(p => p.TopicId == topic.TopicId))
        {
            <tr>
                <td class="quesPrompt">@((char)(question.QuestionOrder+96))) @question.QuestionPrompt</td>
                <td class="quesActions text-center">
                    <form asp-action="DeleteQuestion" method="post">
                        <a asp-action="EditQuestion" class="btn btn-sm btn-warning"
                           asp-route-questionNo="@question.QuestionId">
                            Edit
                        </a>
                        <input type="hidden" name="QuestionNo" id="DeleteButton" value="@question.QuestionId" />
                        <input type="hidden" name="topicSortOrder" id="DeleteButton" value="@ViewBag.topicSortOrder" />
                        <input type="hidden" name="questionSortOrder" id="DeleteButton" value="@ViewBag.questionSortOrder" />
                        @if (question.Active == 1)
                        {
                            <a asp-action="ShowHideQuestion" onclick="return confirmation('Are you sure you want to hide this question?')" class="btn btn-dark btn-sm DeleteEvents"
                               asp-route-questionNo="@question.QuestionId" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionOrder="@ViewBag.questionSortOrder">
                                Active
                            </a>
                        }
                        else
                        {
                            <a asp-action="ShowHideQuestion" onclick="return confirmation('Are you sure you want to show this question?')" class="btn btn-outline-dark btn-sm DeleteEvents"
                               asp-route-questionNo="@question.QuestionId" asp-route-topicSortOrder="@ViewBag.topicSortOrder" asp-route-questionOrder="@ViewBag.questionSortOrder">
                                Inactive
                            </a>
                        }
                        <button type="submit" onclick="return confirmation('Are you sure you want to delete this question?')" class="btn btn-danger btn-sm DeleteEvents">
                            Delete
                        </button>
                    </form>
                </td>
            </tr>
        }
        <tr>
            <td colspan="2">
                <div class="text-center">
                    <form asp-action="AddQ" method="get">
                        <input type="hidden" name="TopicNo" value="@topic.TopicId" />
                        <button type="submit" class="btn btn-primary">
                            Add Question
                        </button>
                    </form>
                </div>
            </td>
        </tr>

    </table>
}
<div class="text-center">
    <form asp-action="AddTopic" method="get">
        <input type="hidden" name="domainNo" value="@Model.Domain.DomainId" />
        <button type="submit" class="btn btn-primary btn-lg">
            Add Topic
        </button>
        <a asp-action="ViewSurveys" class="btn btn-outline-primary btn-lg">Back</a>
    </form>
</div>

